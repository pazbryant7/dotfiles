#!/usr/bin/env zsh

autoload -Uz \
	url-quote-magic \
	edit-command-line \
	compinit && compinit

# zsh widgets
# ./functions should be
# sourced before
zle -N edit-command-line
zle -N smart_help
zle -N clear_and_redisplay
zle -N copy_terminal_buffer

# custom binds
bindkey -e # use emacs preset

bindkey '\eh' smart_help
bindkey '^[e' edit-command-line
bindkey '^L' clear_and_redisplay
bindkey '^X' copy_terminal_buffer
bindkey '^[[Z' reverse-menu-complete
bindkey '^p' _atuin_up_search_widget

# zsh options
setopt \
	AUTO_CD \
	HIST_FIND_NO_DUPS \
	HIST_IGNORE_ALL_DUPS

# disable native zsh history file
export HISTFILE=/dev/null

# completion configuration
zstyle ':completion:*' menu select

zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

PROMPT='%F{white}%2~%f '

# start software
eval "$(fzf --zsh)"
eval "$(atuin init zsh)"
eval "$(zoxide init zsh)"
eval "$(starship init zsh)"
eval "$(fnm env --use-on-cd)"

# disable "c-s delay"
stty -ixon
stty susp undef
