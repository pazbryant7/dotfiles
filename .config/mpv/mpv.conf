# MPV Configuration for 1080p Anime
# Default Profile: Intel i7-6700 Integrated Graphics (Optimized for Performance)

# Video Output
vo=gpu-next
profile=integrated-gpu
gpu-api=opengl

# Subtitles
sub-font='Arvo'
sub-font-size=35
sub-blur=0
sub-bold=yes
sub-auto=fuzzy
sub-margin-y=50
sub-margin-x=100
sub-fix-timing=yes
sub-border-size=0.8
sub-color="#FFFFFF"
sub-shadow-offset=2
sub-ass-override=force
subs-with-matching-audio=no
sub-border-color="#00000066"
sub-shadow-color="#aa000000"
sub-ass-use-video-data=aspect-ratio
demuxer-mkv-subtitle-preroll=yes

# Audio
alang=ja,jp,jpn,en,eng,es
slang=en,eng,es
audio-file-auto=fuzzy
audio-display=no

# OSD & Cursor
osc=no
osd-level=1
osd-bar=yes
cursor-autohide=100
volume=101

# File Handling
save-position-on-quit=yes
force-seekable=yes
keep-open=yes

# Screenshots
screenshot-format=png
screenshot-jpeg-quality=95
screenshot-png-compression=1
screenshot-high-bit-depth=yes
screenshot-directory="~/Pictures/screenshots"
screenshot-template="%f-%wH.%wM.%wS.%wT-#%#00n"

# Input
input-default-bindings=no

# ============================================================================
# PROFILE 1: Integrated GPU (Default - Performance Optimized)
# ============================================================================
[integrated-gpu]
# Minimal processing for integrated GPU
scale=bilinear
cscale=bilinear
dscale=bilinear

# Light deband (reduced iterations to save GPU)
deband=yes
deband-iterations=2
deband-threshold=32
deband-range=16
deband-grain=4

# Disable heavy processing
interpolation=no
tone-mapping=off
icc-profile-auto=no
target-colorspace-hint=no

# Subtle enhancements only
sharpen=0.05

# ============================================================================
# PROFILE 2: Dedicated GPU (High Quality)
# ============================================================================
[dedicated-gpu]
profile=gpu-hq

# High-quality scaling
scale=ewa_lanczos4
cscale=ewa_lanczossharp
dscale=mitchell

# Full deband settings
deband=yes
deband-iterations=4
deband-threshold=32
deband-range=16
deband-grain=6

# Advanced processing
interpolation=yes
tscale=oversample
blend-subtitles=yes
tone-mapping=bt.2390
tone-mapping-mode=auto
icc-profile-auto=yes
target-colorspace-hint=yes

# Better sharpening
sharpen=0.15
unsharp=luma:0.3:0.75

# ============================================================================
# PROFILE 3: Anime4K Ultra (Best Quality - GPU Intensive)
# Ultra upscaling with anime-optimized shaders
# Download Anime4K from: https://github.com/bloc97/Anime4K/releases
# ============================================================================
[anime4k-ultra]
profile=gpu-hq

# High-quality scaling as base
scale=ewa_lanczos4
cscale=ewa_lanczossharp
dscale=mitchell

# Anime4K Shaders (adjust path to your shader location)
# This setup uses the strongest Anime4K configuration
glsl-shaders="~~/shaders/Anime4K_Clamp_Highlights.glsl:~~/shaders/Anime4K_Restore_CNN_VL.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_VL.glsl:~~/shaders/Anime4K_AutoDownscalePre_x2.glsl:~~/shaders/Anime4K_AutoDownscalePre_x4.glsl:~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"

# Full deband settings
deband=yes
deband-iterations=4
deband-threshold=32
deband-range=16
deband-grain=6

# Advanced processing
interpolation=yes
tscale=oversample
blend-subtitles=yes
tone-mapping=bt.2390
tone-mapping-mode=auto
icc-profile-auto=yes
target-colorspace-hint=yes

# Aggressive sharpening for Anime4K
sharpen=0.25
unsharp=luma:0.5:1.0

# Performance note: This profile is very GPU intensive
# Only use on dedicated GPUs, not integrated graphics
